<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>&lt;Linux Shell 脚本攻略&gt;学习笔记 | emacsist</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="bash,linux," />
  

  <meta name="description" content="shebangwiki  在计算机科学中，Shebang（也称为 Hashbang ）是一个由井号和叹号构成的字符序列 #! ，其出现在文本文件的第一行的前两个字符  bash 的配置文件执行顺序这里自己额外想到的, 所以整理了下网上的资料 Zsh/Bash startup files loading order (.bashrc, .zshrc etc.) 1234567891011121314">
<meta name="keywords" content="bash,linux">
<meta property="og:type" content="article">
<meta property="og:title" content="&lt;Linux Shell 脚本攻略&gt;学习笔记">
<meta property="og:url" content="https://emacsist.github.io/2017/12/31/Linux-Shell-脚本攻略-学习笔记/index.html">
<meta property="og:site_name" content="emacsist">
<meta property="og:description" content="shebangwiki  在计算机科学中，Shebang（也称为 Hashbang ）是一个由井号和叹号构成的字符序列 #! ，其出现在文本文件的第一行的前两个字符  bash 的配置文件执行顺序这里自己额外想到的, 所以整理了下网上的资料 Zsh/Bash startup files loading order (.bashrc, .zshrc etc.) 1234567891011121314">
<meta property="og:updated_time" content="2018-01-03T04:55:37.516Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="&lt;Linux Shell 脚本攻略&gt;学习笔记">
<meta name="twitter:description" content="shebangwiki  在计算机科学中，Shebang（也称为 Hashbang ）是一个由井号和叹号构成的字符序列 #! ，其出现在文本文件的第一行的前两个字符  bash 的配置文件执行顺序这里自己额外想到的, 所以整理了下网上的资料 Zsh/Bash startup files loading order (.bashrc, .zshrc etc.) 1234567891011121314">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b870e52c6cd914cb42627e4a706700b7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  

  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header LEFT">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/books/"
            rel="noopener noreferrer"
            target="_self"
            >
            阅读
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#shebang"><span class="toc-text">shebang</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#bash-的配置文件执行顺序"><span class="toc-text">bash 的配置文件执行顺序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#命令分隔"><span class="toc-text">命令分隔</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注释"><span class="toc-text">注释</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#终端打印"><span class="toc-text">终端打印</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#echo"><span class="toc-text">echo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#彩色转出"><span class="toc-text">彩色转出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#文本"><span class="toc-text">文本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#背景"><span class="toc-text">背景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#printf"><span class="toc-text">printf</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#变量"><span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#环境变量"><span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#终端环境变量"><span class="toc-text">终端环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进行的环境变量"><span class="toc-text">进行的环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量赋值"><span class="toc-text">变量赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用变量的值"><span class="toc-text">引用变量的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取变量的长度"><span class="toc-text">获取变量的长度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取当前的SHELL"><span class="toc-text">获取当前的SHELL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#检查是否-root-用户"><span class="toc-text">检查是否 root 用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改提示符字符串"><span class="toc-text">修改提示符字符串</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bash-中进行数学运算"><span class="toc-text">Bash 中进行数学运算</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#let"><span class="toc-text">let</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-text">使用 []</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-1"><span class="toc-text">使用 (())</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-expr"><span class="toc-text">使用 expr</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#浮点运算-bc"><span class="toc-text">浮点运算 bc</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设置精度"><span class="toc-text">设置精度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#进制转换"><span class="toc-text">进制转换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#文件描述符"><span class="toc-text">文件描述符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义文件描述符"><span class="toc-text">自定义文件描述符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#读取"><span class="toc-text">读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写入"><span class="toc-text">写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#追加"><span class="toc-text">追加</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#重定向"><span class="toc-text">重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#多行文件重定向"><span class="toc-text">多行文件重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#命令的成功与否"><span class="toc-text">命令的成功与否</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数组"><span class="toc-text">数组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#关联数组"><span class="toc-text">关联数组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#别名"><span class="toc-text">别名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#日期和时间"><span class="toc-text">日期和时间</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#打印纪元时"><span class="toc-text">打印纪元时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从指定时间转换为纪元"><span class="toc-text">从指定时间转换为纪元</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取星期几"><span class="toc-text">获取星期几</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#格式化日期"><span class="toc-text">格式化日期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置日期和时间"><span class="toc-text">设置日期和时间</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#调试脚本"><span class="toc-text">调试脚本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#函数"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#定义"><span class="toc-text">定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#执行"><span class="toc-text">执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#访问参数"><span class="toc-text">访问参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#递归"><span class="toc-text">递归</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#导出函数"><span class="toc-text">导出函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读取命令返回值-状态"><span class="toc-text">读取命令返回值(状态)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#命令输出读入到变量"><span class="toc-text">命令输出读入到变量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#子shell"><span class="toc-text">子shell</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#保留空格和换行"><span class="toc-text">保留空格和换行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#read-命令"><span class="toc-text">read 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#读取-N-个字符到变量"><span class="toc-text">读取 N 个字符到变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用无回显的方式读取密码"><span class="toc-text">用无回显的方式读取密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#显示提示信息"><span class="toc-text">显示提示信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在特定时限内读取"><span class="toc-text">在特定时限内读取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用特定的定界符作为输入行的结束"><span class="toc-text">用特定的定界符作为输入行的结束</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#true-的命令"><span class="toc-text">true 的命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字段分隔符-IFS"><span class="toc-text">字段分隔符 IFS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#for-循环"><span class="toc-text">for 循环</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#序列"><span class="toc-text">序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for-的-c-风格"><span class="toc-text">for 的 c 风格</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#while-循环"><span class="toc-text">while 循环</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#until-循环"><span class="toc-text">until 循环</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#if"><span class="toc-text">if</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#if-else-if-else"><span class="toc-text">if .. else if .. else</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#算术比较"><span class="toc-text">算术比较</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#文件系统测试"><span class="toc-text">文件系统测试</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串比较"><span class="toc-text">字符串比较</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#test-命令"><span class="toc-text">test 命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cat"><span class="toc-text">cat</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#find-命令"><span class="toc-text">find 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OR"><span class="toc-text">OR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#否定"><span class="toc-text">否定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于目录深度"><span class="toc-text">基于目录深度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#根据文件类型搜索"><span class="toc-text">根据文件类型搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件时间"><span class="toc-text">文件时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件大小"><span class="toc-text">文件大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除匹配"><span class="toc-text">删除匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于权限"><span class="toc-text">基于权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动作"><span class="toc-text">动作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tr-命令"><span class="toc-text">tr 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#映射"><span class="toc-text">映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#删除字符"><span class="toc-text">删除字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#压缩字符"><span class="toc-text">压缩字符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#校验和"><span class="toc-text">校验和</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#加解密"><span class="toc-text">加解密</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#crypt"><span class="toc-text">crypt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gpg"><span class="toc-text">gpg</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#base64"><span class="toc-text">base64</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#临时文件"><span class="toc-text">临时文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#提取文件名和扩展名"><span class="toc-text">提取文件名和扩展名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#并行操作"><span class="toc-text">并行操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dd-命令"><span class="toc-text">dd 命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#不可删除的文件"><span class="toc-text">不可删除的文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#diff-与文件补丁-patch"><span class="toc-text">diff 与文件补丁 patch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#快速定位目录"><span class="toc-text">快速定位目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wc-命令"><span class="toc-text">wc 命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#正则"><span class="toc-text">正则</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cut-命令"><span class="toc-text">cut 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#提取指定列"><span class="toc-text">提取指定列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#排除指定列"><span class="toc-text">排除指定列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定界定符"><span class="toc-text">指定界定符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定字段的字符或字节范围"><span class="toc-text">指定字段的字符或字节范围</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sed-命令"><span class="toc-text">sed 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#替换字符串"><span class="toc-text">替换字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#应用到文件"><span class="toc-text">应用到文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全局应用"><span class="toc-text">全局应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#界定符"><span class="toc-text">界定符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#移除空白行"><span class="toc-text">移除空白行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#awk"><span class="toc-text">awk</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊变量"><span class="toc-text">特殊变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#将外部变量传递给-awk"><span class="toc-text">将外部变量传递给 awk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置字段界定符"><span class="toc-text">设置字段界定符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内建函数"><span class="toc-text">内建函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#paste-命令-列拼接"><span class="toc-text">paste 命令:列拼接</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tac"><span class="toc-text">tac</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wget"><span class="toc-text">wget</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#指定多个下载"><span class="toc-text">指定多个下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定输出文件"><span class="toc-text">指定输出文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重试次数"><span class="toc-text">重试次数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#限速"><span class="toc-text">限速</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最大下载配额"><span class="toc-text">最大下载配额</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#断点续传"><span class="toc-text">断点续传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#复制整个网站"><span class="toc-text">复制整个网站</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#curl-命令"><span class="toc-text">curl 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#避免显示进度"><span class="toc-text">避免显示进度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下载"><span class="toc-text">下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#型进度条"><span class="toc-text"># 型进度条</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#断点续传-1"><span class="toc-text">断点续传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置-referer"><span class="toc-text">设置 referer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置-cookie"><span class="toc-text">设置 cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#将-cookie-另存为文件"><span class="toc-text">将 cookie 另存为文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#限制带宽"><span class="toc-text">限制带宽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#只打印头部"><span class="toc-text">只打印头部</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tar-命令"><span class="toc-text">tar 命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rsync-命令"><span class="toc-text">rsync 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#排除"><span class="toc-text">排除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#同步时在dest-path中删除源端不存在的文件"><span class="toc-text">同步时在dest_path中删除源端不存在的文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fsarchiver-命令"><span class="toc-text">fsarchiver 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建"><span class="toc-text">创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#恢复"><span class="toc-text">恢复</span></a></li></ol></li></ol>
  </div>



<div class="content content-post LEFT">
   <article id="post-Linux-Shell-脚本攻略-学习笔记" class="article article-type-post" itemprop="blogPost">
    <header class="article-header">
        <h1 class="post-title">
            &lt;Linux Shell 脚本攻略&gt;学习笔记
        </h1>

        <div class="article-meta">
            <span>
        <i class="icon-calendar"></i>
        <span>2017.12.31</span>
            </span>

            
                <span class="article-author">
          <i class="icon-user"></i>
          <span>emacsist</span>
                </span>
                

                    
    <span class="article-category">
    <i class="icon-list"></i>
    
      <a class="tag-item" href="/tags/#bash">
        <span class="tag-name">bash</span>
    <span class="tag-size">( 8 )</span>
    </a>
    
      <a class="tag-item" href="/tags/#linux">
        <span class="tag-name">linux</span>
    <span class="tag-size">( 15 )</span>
    </a>
    

        </span>
        

                        

                                

                                        

        </div>
    </header>

    <div class="article-content">
        
                            <h1 id="shebang"><a href="#shebang" class="headerlink" title="shebang"></a>shebang</h1><p><a href="https://zh.wikipedia.org/wiki/Shebang" target="_blank" rel="external">wiki</a></p>
<blockquote>
<p>在计算机科学中，Shebang（也称为 Hashbang ）是一个由井号和叹号构成的字符序列 #! ，其出现在文本文件的第一行的前两个字符</p>
</blockquote>
<h1 id="bash-的配置文件执行顺序"><a href="#bash-的配置文件执行顺序" class="headerlink" title="bash 的配置文件执行顺序"></a>bash 的配置文件执行顺序</h1><p>这里自己额外想到的, 所以整理了下网上的资料</p>
<p><a href="https://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/" target="_blank" rel="external">Zsh/Bash startup files loading order (.bashrc, .zshrc etc.)</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |Interactive|Interactive|Script|</div><div class="line">|                |login      |non-login  |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/profile    |   A       |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/bash.bashrc|           |    A      |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.bashrc       |           |    B      |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.bash_profile |   B1      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.bash_login   |   B2      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.profile      |   B3      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|BASH_ENV        |           |           |  A   |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |           |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |           |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.bash_logout  |    C      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div></pre></td></tr></table></figure>
<p>对于 zsh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |Interactive|Interactive|Script|</div><div class="line">|                |login      |non-login  |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/zshenv     |    A      |    A      |  A   |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.zshenv       |    B      |    B      |  B   |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/zprofile   |    C      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.zprofile     |    D      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/zshrc      |    E      |    C      |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.zshrc        |    F      |    D      |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/zlogin     |    G      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.zlogin       |    H      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |           |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|                |           |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|~/.zlogout      |    I      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div><div class="line">|/etc/zlogout    |    J      |           |      |</div><div class="line">+----------------|-----------|-----------|------+</div></pre></td></tr></table></figure>
<h1 id="命令分隔"><a href="#命令分隔" class="headerlink" title="命令分隔"></a>命令分隔</h1><p>用分号或换行符. 即:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmd1; cmd2</div></pre></td></tr></table></figure>
<p>等同于</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cmd1</div><div class="line">cmd2</div></pre></td></tr></table></figure>
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><blockquote>
<p>#</p>
</blockquote>
<p>以 <code>#</code> 符号及之后的行内容都是注释</p>
<h1 id="终端打印"><a href="#终端打印" class="headerlink" title="终端打印"></a>终端打印</h1><h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><ul>
<li>双引号的字符串则会进行变量替换</li>
<li>单引号的字符串则不会进行变量替换</li>
<li>默认情况下, 会自动添加换行</li>
</ul>
<p><code>-n</code> 参数: 忽略结尾的换行<br><code>-e</code> 参数: 表示包含转义序列</p>
<h3 id="彩色转出"><a href="#彩色转出" class="headerlink" title="彩色转出"></a>彩色转出</h3><h4 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h4><p>颜色码:</p>
<ul>
<li>0 重置</li>
<li>30 黑色</li>
<li>31 红色</li>
<li>37 白色<br>等等</li>
</ul>
<p>例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"\e[1;31m Hello World\e[0m"</span></div></pre></td></tr></table></figure>
<h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>颜色码:</p>
<ul>
<li>0 重置</li>
<li>40 黑色</li>
<li>41 红色</li>
<li>47 白色<br>等等</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"\e[1;42m Hello World\e[0m"</span></div></pre></td></tr></table></figure>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><p>与 C 语言中的 <code>printf</code> 函数参数一样.</p>
<ul>
<li>默认情况下, 不会自动添加换行</li>
</ul>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>在 Bash 中, 每一个变量的值都是字符串, 无论你给变量赋值时有没有使用引号, 值都会以字符串的形式存储.</p>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>有一些特殊的变量会被Shell环境和操作系统用来存储一些特别的值, 这类变量就称为 <code>环境变量</code></p>
<h2 id="终端环境变量"><a href="#终端环境变量" class="headerlink" title="终端环境变量"></a>终端环境变量</h2><p>使用 <code>env</code> 命令查看.</p>
<h2 id="进行的环境变量"><a href="#进行的环境变量" class="headerlink" title="进行的环境变量"></a>进行的环境变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /proc/<span class="variable">$PID</span>/environ</div></pre></td></tr></table></figure>
<p>上面返回的是变量的列表, 以 <code>name=value</code> 的形式来描述. 之间由 <code>\0</code> 分隔. 可将 <code>\0</code> 替换为 <code>\n</code> 就可使每一行显示了.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /proc/<span class="variable">$PID</span>/environ | tr <span class="string">'\0'</span> <span class="string">'\n'</span></div></pre></td></tr></table></figure>
<h2 id="变量赋值"><a href="#变量赋值" class="headerlink" title="变量赋值"></a>变量赋值</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var=value</div></pre></td></tr></table></figure>
<p>注意, 它不同于</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var = value</div></pre></td></tr></table></figure>
<p>前者才是赋值, 后者是相等操作.</p>
<h2 id="引用变量的值"><a href="#引用变量的值" class="headerlink" title="引用变量的值"></a>引用变量的值</h2><p><code>$var</code></p>
<p>或</p>
<p><code>${var}</code></p>
<p>注意, 如果包含在单引号里, 变量不会被扩展. 将依照原样显示.</p>
<h2 id="获取变量的长度"><a href="#获取变量的长度" class="headerlink" title="获取变量的长度"></a>获取变量的长度</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">length=<span class="variable">$&#123;#var&#125;</span></div></pre></td></tr></table></figure>
<h2 id="获取当前的SHELL"><a href="#获取当前的SHELL" class="headerlink" title="获取当前的SHELL"></a>获取当前的SHELL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$0</span></div><div class="line"></div><div class="line">或</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></div></pre></td></tr></table></figure>
<h2 id="检查是否-root-用户"><a href="#检查是否-root-用户" class="headerlink" title="检查是否 root 用户"></a>检查是否 root 用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -ne 0 ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"Non root user"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"root user"</span></div><div class="line"><span class="keyword">if</span></div></pre></td></tr></table></figure>
<h2 id="修改提示符字符串"><a href="#修改提示符字符串" class="headerlink" title="修改提示符字符串"></a>修改提示符字符串</h2><p>在文件 <code>~/.bashrc</code> 中的某一行的 <code>PS1</code> 变量中设置的.</p>
<h1 id="Bash-中进行数学运算"><a href="#Bash-中进行数学运算" class="headerlink" title="Bash 中进行数学运算"></a>Bash 中进行数学运算</h1><h2 id="let"><a href="#let" class="headerlink" title="let"></a>let</h2><p>使用let时, 变量名之前不需要添加 <code>$</code> , 例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">no1=4</div><div class="line">no2=5</div><div class="line"></div><div class="line"><span class="built_in">let</span> result=no1+no2</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$result</span></div></pre></td></tr></table></figure>
<p>自加和自减,缩写</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> no1++</div><div class="line"><span class="built_in">let</span> no1--</div><div class="line"></div><div class="line"><span class="built_in">let</span> no1+=6</div><div class="line"><span class="built_in">let</span> no1-=6</div></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用 []"></a>使用 <code>[]</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">result=$[ no1 + no2 ]</div><div class="line"></div><div class="line">或</div><div class="line"></div><div class="line">result=$[ <span class="variable">$no1</span> + 5 ]</div></pre></td></tr></table></figure>
<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用 (())"></a>使用 <code>(())</code></h2><p>这种变量名之前要加上 <code>$</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">result=$(( no1 + 50 ))</div></pre></td></tr></table></figure>
<h2 id="使用-expr"><a href="#使用-expr" class="headerlink" title="使用 expr"></a>使用 expr</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">result=`expr 3 + 4`</div><div class="line"></div><div class="line">result=$(expr <span class="variable">$no1</span> + 5)</div></pre></td></tr></table></figure>
<h2 id="浮点运算-bc"><a href="#浮点运算-bc" class="headerlink" title="浮点运算 bc"></a>浮点运算 bc</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"4 * 0.45"</span> | bc</div></pre></td></tr></table></figure>
<h3 id="设置精度"><a href="#设置精度" class="headerlink" title="设置精度"></a>设置精度</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"scale=2; 3/8"</span> | bc</div></pre></td></tr></table></figure>
<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"obase=2; 1000"</span> | bc</div></pre></td></tr></table></figure>
<p><code>obase</code> : 输出进制<br><code>ibase</code> : 输入进制</p>
<h1 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h1><blockquote>
<p>文件描述符是一种用于访问文件的抽象指示器. 存取文件离不开被称为 <code>文件描述符</code> 的特殊数字.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">0 : 标准输入 stdin /dev/stdin</div><div class="line">1 : 标准输出 stdout /dev/stdout</div><div class="line">2 : 标准错误 stderr /dev/stderr</div></pre></td></tr></table></figure>
<h2 id="自定义文件描述符"><a href="#自定义文件描述符" class="headerlink" title="自定义文件描述符"></a>自定义文件描述符</h2><p>文件打开模式通常有3种</p>
<ol>
<li>只读</li>
<li>截断写入</li>
<li>追加写入</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt; : 从文件中读取内容到 stdin</div><div class="line">&gt; : 用于截断模式写入</div><div class="line">&gt;&gt; : 用于追加模式写入</div></pre></td></tr></table></figure>
<h3 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h3><p>创建一个文件描述符进行读取:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">exec</span> 3&lt;input.txt</div></pre></td></tr></table></figure>
<p>这表示使用文件描述符3打开并读取文件.</p>
<p>使用文件描述符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat &lt;&amp;3</div></pre></td></tr></table></figure>
<p>注意, 只能读取一次, 若要再次读取, 则要重新使用 exec 来分配文件描述符进行二次读取.</p>
<h3 id="写入"><a href="#写入" class="headerlink" title="写入"></a>写入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 创建</span></div><div class="line"><span class="built_in">exec</span> 4&gt;output.txt</div><div class="line"></div><div class="line"><span class="comment"># 使用</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"ehllo"</span> &gt;&amp;4</div></pre></td></tr></table></figure>
<h3 id="追加"><a href="#追加" class="headerlink" title="追加"></a>追加</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">exec</span> 5&gt;&gt;output.txt</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"hello"</span> &gt;&amp;5</div></pre></td></tr></table></figure>
<p>注意, 是使用 <code>&gt;&amp;5</code></p>
<h1 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; : 旧内容会被清空, 然后设置为新的内容. 这等同于 1&gt;</div><div class="line"></div><div class="line">&gt;&gt; : 追加到旧内容尾部. 这等同于 1&gt;&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt; : 用于从文件中读取内容到 stdin</div></pre></td></tr></table></figure>
<p>将 <code>stderr</code> 和 <code>stdout</code> 分别重定向到一个文件:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmd 2&gt;stderr.txt 1&gt;stdout.txt</div></pre></td></tr></table></figure>
<p><code>stderr</code> 和 <code>stdout</code> 一起重定向:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmd 2&gt;&amp;1 output.txt</div></pre></td></tr></table></figure>
<p>忽略错误输出:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmd 2&gt;/dev/null 1&gt;output.txt</div></pre></td></tr></table></figure>
<p>同时重定向到文件和 <code>stdout</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">command</span> | tee FILE2 FILE2</div></pre></td></tr></table></figure>
<p>注意, <code>tee</code> 只能读取 <code>stdout</code> 而不包括 <code>stderr</code></p>
<p>使用 <code>stdin</code> 作为命令行参数:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmd 1 | cmd2 | cmd3 -</div></pre></td></tr></table></figure>
<p>即 <code>-</code> 作为命令的文件名参数即可.</p>
<h2 id="多行文件重定向"><a href="#多行文件重定向" class="headerlink" title="多行文件重定向"></a>多行文件重定向</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cat &lt;&lt; EOF &gt; log.txt</div><div class="line">这里是内容</div><div class="line">EOF</div></pre></td></tr></table></figure>
<p>理解: <a href="https://stackoverflow.com/questions/2500436/how-does-cat-eof-work-in-bash" target="_blank" rel="external">stackoverflow.com</a></p>
<blockquote>
<p>这表示, 指示 shell 直接从当前源中读取输入, 直到有一行的内容仅包含 EOF 这个单词.</p>
</blockquote>
<h1 id="命令的成功与否"><a href="#命令的成功与否" class="headerlink" title="命令的成功与否"></a>命令的成功与否</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> $?</div></pre></td></tr></table></figure>
<p>如果返回0, 表示上一个命令执行成功, 否则是失败.</p>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>起始索引为0.</p>
<p>定义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array_var=(1 2 3 4 5 6)</div></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var[0]&#125;</span></div></pre></td></tr></table></figure>
<p>打印数组所有值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var[*]&#125;</span></div><div class="line"></div><div class="line">或</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_var[@]&#125;</span></div></pre></td></tr></table></figure>
<p>长度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#array_var[*]&#125;</span></div></pre></td></tr></table></figure>
<h1 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h1><p>定义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">declare</span> -A ass_array</div><div class="line"></div><div class="line">ass_array=([key1]=value [key2]=value2)</div><div class="line"></div><div class="line">或</div><div class="line">ass_array[key1]=value1</div><div class="line">ass_array[key2]=value2</div></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;ass_array[key]&#125;</span></div></pre></td></tr></table></figure>
<p>列出数组索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;! ass_array[*]&#125;</span></div><div class="line"></div><div class="line">或</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;! ass_array[@]&#125;</span></div></pre></td></tr></table></figure>
<h1 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> new_command=<span class="string">'command sequence'</span></div></pre></td></tr></table></figure>
<p>永久保存: 将内容写到 <code>~/.bashrc</code></p>
<p>删除别名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> new_command=</div><div class="line"><span class="built_in">unalias</span> new_command</div></pre></td></tr></table></figure>
<h1 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h1><p>纪元时或 Unix 时间: UTC 1970年1月1日 0时0分0秒起所流逝的秒数.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date</div></pre></td></tr></table></figure>
<h2 id="打印纪元时"><a href="#打印纪元时" class="headerlink" title="打印纪元时"></a>打印纪元时</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date +%s</div></pre></td></tr></table></figure>
<h2 id="从指定时间转换为纪元"><a href="#从指定时间转换为纪元" class="headerlink" title="从指定时间转换为纪元"></a>从指定时间转换为纪元</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date --date <span class="string">"Thu Nov 18 08:07:21 IST 2010"</span> +%s</div></pre></td></tr></table></figure>
<p><code>--date</code> 用于提供日期字符串作为输入.</p>
<h2 id="获取星期几"><a href="#获取星期几" class="headerlink" title="获取星期几"></a>获取星期几</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date --date <span class="string">"Jan 20 2001"</span> +%A</div></pre></td></tr></table></figure>
<h2 id="格式化日期"><a href="#格式化日期" class="headerlink" title="格式化日期"></a>格式化日期</h2><p><a href="https://ss64.com/bash/date.html" target="_blank" rel="external">格式化占位符列表</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date <span class="string">"+%d %B %Y"</span></div></pre></td></tr></table></figure>
<h2 id="设置日期和时间"><a href="#设置日期和时间" class="headerlink" title="设置日期和时间"></a>设置日期和时间</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">date -s <span class="string">"格式化的日期字符串"</span></div></pre></td></tr></table></figure>
<h1 id="调试脚本"><a href="#调试脚本" class="headerlink" title="调试脚本"></a>调试脚本</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bash -x script.sh</div></pre></td></tr></table></figure>
<p>在脚本内部, 进行部分调试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">set</span> -x</div><div class="line">要调试的代码段</div><div class="line"><span class="built_in">set</span> +x</div></pre></td></tr></table></figure>
<p><code>-x</code> : 执行时显示命令和参数<br><code>+x</code> : 禁止调试<br><code>-v</code> : 当命令进行读取时显示输入<br><code>+v</code> : 禁止打印输入</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">fname</span></span>() &#123;</div><div class="line">	statements;</div><div class="line">&#125;</div><div class="line"></div><div class="line">或</div><div class="line"></div><div class="line"><span class="function"><span class="title">fname</span></span>() &#123;</div><div class="line">	statements;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fname;</div><div class="line"></div><div class="line">传递参数</div><div class="line"></div><div class="line">fname arg1 arg2;</div></pre></td></tr></table></figure>
<h2 id="访问参数"><a href="#访问参数" class="headerlink" title="访问参数"></a>访问参数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">fname</span></span>()&#123;</div><div class="line">	<span class="built_in">echo</span> <span class="variable">$1</span>,  <span class="variable">$2</span> <span class="comment"># 访问参数1, 参数2</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$@</span>"</span> <span class="comment"># 以列表的方式一次性打印所有参数</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"$*"</span>; <span class="comment"># 类似 $@, 但是参数被作为单个实体</span></div><div class="line">    <span class="built_in">return</span> 0; <span class="comment"># 返回值</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>即</p>
<ul>
<li><code>$1</code> 是第一个参数</li>
<li><code>$2</code> 是第二个参数</li>
<li><code>$n</code> 是第n个参数</li>
<li><code>$@</code> 被扩展为”$1” “$2” “$3” 等</li>
<li><code>$*</code> 被扩展成 “$1c$2c$3”, 其中c是IFS的第一个字符</li>
<li><code>$@</code> 用的比 <code>$*</code> 多, 因为 <code>$*</code> 将所有参数当作单个字符串, 因此它很少被使用</li>
</ul>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>bash 支持递归调用</p>
<h2 id="导出函数"><a href="#导出函数" class="headerlink" title="导出函数"></a>导出函数</h2><p>函数也可以像环境变量一样用 <code>export</code> 导出, 如此一来, 函数的作用域就可以扩展到子进程中. 例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> -f fname</div></pre></td></tr></table></figure>
<h2 id="读取命令返回值-状态"><a href="#读取命令返回值-状态" class="headerlink" title="读取命令返回值(状态)"></a>读取命令返回值(状态)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cmd;</div><div class="line"><span class="built_in">echo</span> $?</div></pre></td></tr></table></figure>
<p><code>$?</code> 会给出命令 cmd 的返回值. 这个返回值被称为退出状态. </p>
<h1 id="命令输出读入到变量"><a href="#命令输出读入到变量" class="headerlink" title="命令输出读入到变量"></a>命令输出读入到变量</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 这种方法称为子shell</span></div><div class="line">cmd_output=$(COMMANDS)</div><div class="line"></div><div class="line">或</div><div class="line"><span class="comment"># 这种方法称为 反引用</span></div><div class="line">cmd_output=`COMMANDS`</div></pre></td></tr></table></figure>
<h1 id="子shell"><a href="#子shell" class="headerlink" title="子shell"></a>子shell</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">pwd</span>;</div><div class="line">(<span class="built_in">cd</span> /bin ; ls);</div><div class="line"><span class="built_in">pwd</span>;</div></pre></td></tr></table></figure>
<p>第二行中的语句即为子shell, 它不会对当前shell有任何影响.所有改变仅限于子shell内.</p>
<h2 id="保留空格和换行"><a href="#保留空格和换行" class="headerlink" title="保留空格和换行"></a>保留空格和换行</h2><p>利用子shell或反引用的方法将命令的输出读入到一个变量中, 可以将它放在双引号中, 即可保留空格和换行符.</p>
<p>如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">out=$(cat file.txt)</div><div class="line"></div><div class="line">out1=<span class="string">"<span class="variable">$(cat file.txt)</span>"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>注, 像好这个没有效果. 我在 Ubuntu 16.04.2 LTS , GNU bash, version 4.3.46(1)-release (x86_64-pc-linux-gnu) 版本中测试没有效果. 有待处理.</p>
</blockquote>
<h1 id="read-命令"><a href="#read-命令" class="headerlink" title="read 命令"></a>read 命令</h1><h2 id="读取-N-个字符到变量"><a href="#读取-N-个字符到变量" class="headerlink" title="读取 N 个字符到变量"></a>读取 N 个字符到变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">read</span> -n N var_name</div></pre></td></tr></table></figure>
<h2 id="用无回显的方式读取密码"><a href="#用无回显的方式读取密码" class="headerlink" title="用无回显的方式读取密码"></a>用无回显的方式读取密码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">read</span> -s var</div></pre></td></tr></table></figure>
<h2 id="显示提示信息"><a href="#显示提示信息" class="headerlink" title="显示提示信息"></a>显示提示信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">read</span> -p <span class="string">"enter input:"</span> var</div></pre></td></tr></table></figure>
<h2 id="在特定时限内读取"><a href="#在特定时限内读取" class="headerlink" title="在特定时限内读取"></a>在特定时限内读取</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">read</span> -t timeout var</div></pre></td></tr></table></figure>
<p>单位秒</p>
<h2 id="用特定的定界符作为输入行的结束"><a href="#用特定的定界符作为输入行的结束" class="headerlink" title="用特定的定界符作为输入行的结束"></a>用特定的定界符作为输入行的结束</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">read</span> -d delim_char var</div></pre></td></tr></table></figure>
<h1 id="true-的命令"><a href="#true-的命令" class="headerlink" title="true 的命令"></a>true 的命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:</div></pre></td></tr></table></figure>
<p>它是内建命令, 总是会返回为0的退出码.</p>
<h1 id="字段分隔符-IFS"><a href="#字段分隔符-IFS" class="headerlink" title="字段分隔符 IFS"></a>字段分隔符 IFS</h1><p>IFS 是存储定界符的环境变量, 它是当前 shell 环境使用的默认定界字符串.</p>
<p>它的值, 默认为 <code>空白字符</code> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">data=<span class="string">"1,2,3,4,5"</span></div><div class="line"></div><div class="line">oldIFS=<span class="variable">$IFS</span></div><div class="line"></div><div class="line">IFS=,</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable">$data</span>;</div><div class="line"><span class="keyword">do</span></div><div class="line">  <span class="built_in">echo</span> Item: <span class="variable">$item</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line">IFS=<span class="variable">$oldIFS</span></div></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">./hello.sh</div><div class="line">Item: 1</div><div class="line">Item: 2</div><div class="line">Item: 3</div><div class="line">Item: 4</div><div class="line">Item: 5</div></pre></td></tr></table></figure>
<h1 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> var <span class="keyword">in</span> list;</div><div class="line"><span class="keyword">do</span></div><div class="line"></div><div class="line">	commands;</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p><code>list</code> 可以是字符串, 也可以是一个序列.</p>
<h2 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;1..50&#125;</div></pre></td></tr></table></figure>
<p>表示从1到50的数字列表.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;a..z&#125;</div></pre></td></tr></table></figure>
<h2 id="for-的-c-风格"><a href="#for-的-c-风格" class="headerlink" title="for 的 c 风格"></a>for 的 c 风格</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> ((i=0;i&lt;10;i+)) &#123;</div><div class="line">	commands;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> condition</div><div class="line"><span class="keyword">do</span></div><div class="line"></div><div class="line">	commands;</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<h1 id="until-循环"><a href="#until-循环" class="headerlink" title="until 循环"></a>until 循环</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">until condition;</div><div class="line"><span class="keyword">do</span></div><div class="line">	commands;</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<h1 id="if"><a href="#if" class="headerlink" title="if"></a>if</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">if</span> condition;</div><div class="line"><span class="keyword">then</span></div><div class="line">	commands;</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h1 id="if-else-if-else"><a href="#if-else-if-else" class="headerlink" title="if .. else if .. else"></a>if .. else if .. else</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> condition;</div><div class="line"><span class="keyword">then</span></div><div class="line">	commands;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> condition; <span class="keyword">then</span></div><div class="line">	commands;</div><div class="line"><span class="keyword">else</span></div><div class="line">	commands;</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h1 id="算术比较"><a href="#算术比较" class="headerlink" title="算术比较"></a>算术比较</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ <span class="variable">$var</span> -eq 0 ]</div></pre></td></tr></table></figure>
<p>注意, 中括号与操作数之间要有空白.</p>
<ul>
<li>-gt : 大于</li>
<li>-lt : 小于</li>
<li>-ge : 大于等于</li>
<li>-le : 小于等于</li>
</ul>
<p>组合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[ <span class="variable">$var</span> -ne 0 -a <span class="variable">$var2</span> -gt 2 ] <span class="comment"># 表示逻辑与, -a</span></div><div class="line"></div><div class="line">[ <span class="variable">$var</span> -ne 0 -o <span class="variable">$var2</span> -gt 2 ] <span class="comment"># 表示逻辑或, -o</span></div></pre></td></tr></table></figure>
<h1 id="文件系统测试"><a href="#文件系统测试" class="headerlink" title="文件系统测试"></a>文件系统测试</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[ -f <span class="variable">$file_var</span> ] <span class="comment"># 如果是正常的文件路或文件名</span></div><div class="line"></div><div class="line">[ -x <span class="variable">$var</span> ] <span class="comment"># 如果给定的变量包含的文件可执行, 则返回真</span></div><div class="line"></div><div class="line">[ -d <span class="variable">$var</span> ] <span class="comment"># 如果是目录</span></div><div class="line"></div><div class="line">[ -e <span class="variable">$var</span> ] <span class="comment"># 如果文件存在</span></div><div class="line"></div><div class="line">[ -c <span class="variable">$var</span> ] <span class="comment"># 如果是字符设备</span></div><div class="line"></div><div class="line">[ -b <span class="variable">$var</span> ] <span class="comment"># 如果是块设备</span></div><div class="line"></div><div class="line">[ -w <span class="variable">$var</span> ] <span class="comment"># 如果文件可写</span></div><div class="line"></div><div class="line">[ -r <span class="variable">$var</span> ] <span class="comment"># 如果文件可读</span></div><div class="line"></div><div class="line">[ -L <span class="variable">$var</span> ] <span class="comment"># 如果是符号链接</span></div></pre></td></tr></table></figure>
<h1 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h1><blockquote>
<p>最好使用双中括号</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[[ <span class="variable">$str1</span> = <span class="variable">$str2</span> ]] <span class="comment"># 如果相等</span></div><div class="line"></div><div class="line">[[ <span class="variable">$str1</span> == <span class="variable">$str2</span> ]] <span class="comment"># 如果相等</span></div><div class="line"></div><div class="line">[[ <span class="variable">$str1</span> != <span class="variable">$str2</span> ]] <span class="comment"># 如果不相等</span></div><div class="line"></div><div class="line">[[ <span class="variable">$str</span> &gt; <span class="variable">$str2</span> ]] <span class="comment"># 大于</span></div><div class="line"></div><div class="line">[[ <span class="variable">$str</span> &lt; <span class="variable">$str2</span> ]] <span class="comment"># 小于</span></div><div class="line"></div><div class="line">[[ -z <span class="variable">$str1</span> ]] <span class="comment"># 如果是空字符串</span></div><div class="line"></div><div class="line">[[ -n <span class="variable">$str1</span> ]] <span class="comment"># 如果是非空字符串</span></div></pre></td></tr></table></figure>
<p>组合 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[ -n <span class="variable">$str1</span> ]] &amp;&amp; [[ -z <span class="variable">$str2</span> ]]</div></pre></td></tr></table></figure>
<h1 id="test-命令"><a href="#test-命令" class="headerlink" title="test 命令"></a>test 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ <span class="variable">$var</span> -eq 0 ]; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"True"</span>;</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p>与可以写为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$var</span> -eq 0; <span class="keyword">then</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"True"</span>;</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h1 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h1><ul>
<li>-s : 压缩多行空行为一行空行</li>
<li>-T : 显示制表符</li>
<li>-n : 显示行号</li>
<li>-b : 显示行号, 但不为空白行设置行号</li>
</ul>
<h1 id="find-命令"><a href="#find-命令" class="headerlink" title="find 命令"></a>find 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find base_path -print0</div></pre></td></tr></table></figure>
<ul>
<li>-print0 表示以 ‘\0’ 作为文件名的界定符. 默认为换行符, 但当文件名包含换行符时, 这就有用了. 注意, 是连起来的 <code>-print0</code></li>
<li>-name “*.txt” 正则匹配. </li>
<li>-iname “*.txt” 忽略大小写</li>
</ul>
<h2 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . \( -name <span class="string">"*.txt"</span> -o -name <span class="string">"*.pdf"</span> \) -<span class="built_in">print</span></div></pre></td></tr></table></figure>
<h2 id="否定"><a href="#否定" class="headerlink" title="否定"></a>否定</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . ! -name <span class="string">"*.txt"</span> -<span class="built_in">print</span></div></pre></td></tr></table></figure>
<p>表示匹配所有不以 <code>*.txt</code> 结尾的文件名.</p>
<h2 id="基于目录深度"><a href="#基于目录深度" class="headerlink" title="基于目录深度"></a>基于目录深度</h2><p>默认情况下, find 会遍历所有子目录.可以添加选项来限定深度.</p>
<ul>
<li>-maxdepth</li>
<li>-mindepth</li>
</ul>
<p>这两个参数应该是 find 的第三个参数, 否则可能会影响效率.</p>
<h2 id="根据文件类型搜索"><a href="#根据文件类型搜索" class="headerlink" title="根据文件类型搜索"></a>根据文件类型搜索</h2><ul>
<li>-type d 目录类型</li>
<li>-type f 文件类型</li>
<li>-type l 符号链接类型</li>
<li>-type c 字符设备</li>
<li>-type b 块设备</li>
<li>-type s 套接字</li>
</ul>
<h2 id="文件时间"><a href="#文件时间" class="headerlink" title="文件时间"></a>文件时间</h2><ul>
<li>-atime : 用户最近一次访问时间</li>
<li>-mtime : 文件内容最后一次修改时间</li>
<li>-ctime : 文件元数据最后一次改变的时间</li>
</ul>
<p>后接 <code>+N 或 -N</code> 单位是天. 负号表示是小于, 正号表示大于</p>
<ul>
<li>-amin : 访问时间</li>
<li>-mmin : 修改时间</li>
<li>-cmin : 变化时间</li>
</ul>
<p>这些同上, 只是时间单位为分.</p>
<h2 id="文件大小"><a href="#文件大小" class="headerlink" title="文件大小"></a>文件大小</h2><ul>
<li>-size +2K : 表示大于 2KB 的文件</li>
<li>-size -2K : 表示小于 2KB 的文件</li>
</ul>
<p>单位</p>
<ul>
<li>b : 512 字节</li>
<li>c : 字节</li>
<li>w : 2字</li>
<li>k : 1024 字节</li>
<li>M : 1024 K 字节</li>
<li>G : 1024 M 字节</li>
</ul>
<h2 id="删除匹配"><a href="#删除匹配" class="headerlink" title="删除匹配"></a>删除匹配</h2><ul>
<li>-delete</li>
</ul>
<h2 id="基于权限"><a href="#基于权限" class="headerlink" title="基于权限"></a>基于权限</h2><ul>
<li>-perm 664</li>
</ul>
<h2 id="动作"><a href="#动作" class="headerlink" title="动作"></a>动作</h2><ul>
<li>-exec </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . -<span class="built_in">type</span> f -<span class="built_in">exec</span> cat &#123;&#125; \;&gt; outout.txt</div></pre></td></tr></table></figure>
<p>多命令</p>
<p>exec 不支持执行多命令, 但可以变换一个, 将命令写入脚本, 然后调用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-<span class="built_in">exec</span> ./commands.sh &#123;&#125; \;</div></pre></td></tr></table></figure>
<h1 id="tr-命令"><a href="#tr-命令" class="headerlink" title="tr 命令"></a>tr 命令</h1><p>转换源.</p>
<h2 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tr [options] set1 set2</div></pre></td></tr></table></figure>
<h2 id="删除字符"><a href="#删除字符" class="headerlink" title="删除字符"></a>删除字符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tr -d <span class="string">'[set1]'</span></div></pre></td></tr></table></figure>
<h2 id="压缩字符"><a href="#压缩字符" class="headerlink" title="压缩字符"></a>压缩字符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tr -s <span class="string">' '</span></div></pre></td></tr></table></figure>
<p>将多个空白压缩为一个.</p>
<h1 id="校验和"><a href="#校验和" class="headerlink" title="校验和"></a>校验和</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">md5sum filename</div><div class="line"></div><div class="line">sh1sum filename</div></pre></td></tr></table></figure>
<h1 id="加解密"><a href="#加解密" class="headerlink" title="加解密"></a>加解密</h1><h2 id="crypt"><a href="#crypt" class="headerlink" title="crypt"></a>crypt</h2><p>它是一个简单的加密工具, 从 stdin 接受一个文件以及口令作为输入, 然后将加密数据输出到 stdout</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crypt &lt; input_file &gt; output_file</div></pre></td></tr></table></figure>
<p>解密</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crypt -d &lt; encrypted_file &gt; output_file</div></pre></td></tr></table></figure>
<h2 id="gpg"><a href="#gpg" class="headerlink" title="gpg"></a>gpg</h2><p>加密</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg -c filename</div></pre></td></tr></table></figure>
<p>解密</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg filename.gpg</div></pre></td></tr></table></figure>
<h2 id="base64"><a href="#base64" class="headerlink" title="base64"></a>base64</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">base64 filename &gt; outputfile</div></pre></td></tr></table></figure>
<p>解码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">base64 -d file &gt; outputfile</div></pre></td></tr></table></figure>
<h1 id="临时文件"><a href="#临时文件" class="headerlink" title="临时文件"></a>临时文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">filename=`mktemp`</div><div class="line"></div><div class="line">dirname=`mktemp -d`</div></pre></td></tr></table></figure>
<p>仅生成文件名, 而不是实际的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tempfile=`mktemp -u`</div></pre></td></tr></table></figure>
<p>根据模板创建</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mktemp test.XXX</div></pre></td></tr></table></figure>
<p>它会生成 <code>test.XXX</code> 形式的临时文件.</p>
<h1 id="提取文件名和扩展名"><a href="#提取文件名和扩展名" class="headerlink" title="提取文件名和扩展名"></a>提取文件名和扩展名</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">file_jpg=<span class="string">"sample.jpg"</span></div><div class="line"></div><div class="line">fileName=<span class="variable">$&#123;file_jpg%.*&#125;</span></div><div class="line">suffixName=<span class="variable">$&#123;file_jpg#*.&#125;</span></div></pre></td></tr></table></figure>
<p>注意, 单个 <code>%</code> 是非贪婪操作, 想要贪婪式的, 则使用 <code>%%</code><br>类似的, 还有 <code>#</code> 是非贪婪的, 而 <code>##</code> 是贪婪的.</p>
<h1 id="并行操作"><a href="#并行操作" class="headerlink" title="并行操作"></a>并行操作</h1><p>在循环里的命令, 使用 <code>&amp;</code> 时, 它就会直接向下再执行了, 而不会等待命令执行完成.这样子就可以利用多核</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">PIDARRAY=()</div><div class="line"></div><div class="line"><span class="keyword">for</span> file <span class="keyword">in</span> File1.iso File2.iso</div><div class="line"><span class="keyword">do</span></div><div class="line">	md5sum <span class="variable">$file</span> &amp;</div><div class="line">    PIDARRAY+=(<span class="string">"$!"</span>)</div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="built_in">wait</span> <span class="variable">$&#123;PIDARRAY[@]&#125;</span></div></pre></td></tr></table></figure>
<p>注意, 还要用 wait 来等待多进程的退出.</p>
<h1 id="dd-命令"><a href="#dd-命令" class="headerlink" title="dd 命令"></a>dd 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dd <span class="keyword">if</span>=/dev/zero of=data.file bs=1M count1</div></pre></td></tr></table></figure>
<h1 id="不可删除的文件"><a href="#不可删除的文件" class="headerlink" title="不可删除的文件"></a>不可删除的文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">chattr +i file</div><div class="line"></div><div class="line">删除的时候, 它会提示</div><div class="line"></div><div class="line">rm: remove write-protected regular empty file <span class="string">'file'</span>?</div></pre></td></tr></table></figure>
<p>恢复为可删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chattr -i file</div></pre></td></tr></table></figure>
<h1 id="diff-与文件补丁-patch"><a href="#diff-与文件补丁-patch" class="headerlink" title="diff 与文件补丁 patch"></a>diff 与文件补丁 patch</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">diff -u version1.txt version2.txt &gt; version.patch</div></pre></td></tr></table></figure>
<p>patch 命令可将修改应用于任意文件. 当应用于 <code>version1.txt</code> 时, 就可以得到 <code>version2.txt</code> , 当应用于 <code>version2.txt</code> 时, 就可以得到 <code>version1.txt</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">patch -p1 version1.txt &lt; version.patch</div><div class="line"></div><div class="line">取消修改</div><div class="line"></div><div class="line">patch -p1 version1.txt &lt; version.patch</div></pre></td></tr></table></figure>
<p>递归的形式来处理目录及文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">diff -Naur dir2 dir2</div></pre></td></tr></table></figure>
<h1 id="快速定位目录"><a href="#快速定位目录" class="headerlink" title="快速定位目录"></a>快速定位目录</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">pushd</span> 压入</div><div class="line"></div><div class="line"><span class="built_in">popd</span> 弹出</div><div class="line"></div><div class="line"><span class="built_in">dirs</span> 查看栈的内容</div><div class="line"></div><div class="line"><span class="built_in">cd</span> - 返回上一次的目录</div></pre></td></tr></table></figure>
<p>它是一个处理LIFO的数据结构. 目录被存储在栈中, 然后 push 和 pop 进行切换.</p>
<h1 id="wc-命令"><a href="#wc-命令" class="headerlink" title="wc 命令"></a>wc 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wc -l file <span class="comment"># 统计文件 file 的行数</span></div><div class="line">wc -w file <span class="comment"># 单词数</span></div><div class="line">wc -c file <span class="comment"># 字符数</span></div><div class="line">wc file <span class="comment"># 行数, 单词数, 字符数</span></div><div class="line">wc file -L <span class="comment"># 最长一行的长度</span></div></pre></td></tr></table></figure>
<h1 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h1><p><a href="https://regexper.com" target="_blank" rel="external">可视化正则</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">| 正则   | 描述                            |</div><div class="line">|--------|---------------------------------|</div><div class="line">| ^      | 行起始标记                      |</div><div class="line">| $      | 行结尾标记                      |</div><div class="line">| .      | 任意一个字符                    |</div><div class="line">| []     | 在 [] 中的任意一个字符          |</div><div class="line">| [^]    | 在 [^] 之外的任意一个字符       |</div><div class="line">| [-]    | 在 [-] 指定范围内的任意一个字符 |</div><div class="line">| ?      | 匹配之前的项1次或0次            |</div><div class="line">| +      | 匹配之前的项1次或多次           |</div><div class="line">| *      | 匹配之前的项0次或多次           |</div><div class="line">| ()     | 创建一个用于匹配的子串          |</div><div class="line">| &#123;n&#125;    | 匹配之前的项n次                 |</div><div class="line">| &#123;n, &#125;  | 匹配之前项至少n次               |</div><div class="line">| &#123;n, m&#125; | 匹配之前项n到m次                |</div><div class="line">| \      | 转义                            |</div><div class="line">| 一竖     | 匹配两边任意一项                        |</div></pre></td></tr></table></figure>
<h1 id="cut-命令"><a href="#cut-命令" class="headerlink" title="cut 命令"></a>cut 命令</h1><blockquote>
<p>按列切分</p>
</blockquote>
<h2 id="提取指定列"><a href="#提取指定列" class="headerlink" title="提取指定列"></a>提取指定列</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -f 2,3 filename</div></pre></td></tr></table></figure>
<p>这列表只显示第2,3列</p>
<h2 id="排除指定列"><a href="#排除指定列" class="headerlink" title="排除指定列"></a>排除指定列</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -f3 --complement filename</div></pre></td></tr></table></figure>
<p>这表示除第3列之外的所有列.</p>
<h2 id="指定界定符"><a href="#指定界定符" class="headerlink" title="指定界定符"></a>指定界定符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -d <span class="string">";"</span> filename</div></pre></td></tr></table></figure>
<h2 id="指定字段的字符或字节范围"><a href="#指定字段的字符或字节范围" class="headerlink" title="指定字段的字符或字节范围"></a>指定字段的字符或字节范围</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cut -c1-5 filename</div></pre></td></tr></table></figure>
<p>表示只打印前1~5个字符.</p>
<h1 id="sed-命令"><a href="#sed-命令" class="headerlink" title="sed 命令"></a>sed 命令</h1><blockquote>
<p>stream editor</p>
</blockquote>
<h2 id="替换字符串"><a href="#替换字符串" class="headerlink" title="替换字符串"></a>替换字符串</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed <span class="string">'s/pattern/replace_string/'</span> file</div></pre></td></tr></table></figure>
<h2 id="应用到文件"><a href="#应用到文件" class="headerlink" title="应用到文件"></a>应用到文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed -i <span class="string">'s/pattern/replace_string/'</span> file</div></pre></td></tr></table></figure>
<h2 id="全局应用"><a href="#全局应用" class="headerlink" title="全局应用"></a>全局应用</h2><p>默认情况下, sed 将在每一行的第一处符合的内容替换. 要全部则:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed <span class="string">'s/pattern/replace_string/g'</span> file</div></pre></td></tr></table></figure>
<p>只在第N处开始替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed <span class="string">'s/pattern/replace_string/2g'</span> file</div></pre></td></tr></table></figure>
<h2 id="界定符"><a href="#界定符" class="headerlink" title="界定符"></a>界定符</h2><p>除了 <code>/</code> 还可以:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sed <span class="string">'s:text:replace:g'</span></div><div class="line"></div><div class="line">sed <span class="string">'s|text|replace|g'</span></div></pre></td></tr></table></figure>
<h2 id="移除空白行"><a href="#移除空白行" class="headerlink" title="移除空白行"></a>移除空白行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sed <span class="string">'/^$/d'</span> file</div></pre></td></tr></table></figure>
<h1 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk <span class="string">'&#123;BEGIN &#123;print "start"&#125; pattern &#123;commands&#125; END &#123;print "end"&#125;&#125;'</span> file</div></pre></td></tr></table></figure>
<p>处理流程:</p>
<ol>
<li>执行 BEGIN {commands} 语句块中的语句</li>
<li>从文件或stdin 中读取一行, 然后执行 pattern {commands} , 重复这个过程, 直接文件全部被读取完.</li>
<li>当读至输入流末尾时, 执行 END {commands} 语句块.</li>
</ol>
<h2 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h2><ul>
<li>NR : 当前行号</li>
<li>NF : 当前行的字段数</li>
<li>$0 : 当前行的内容</li>
<li>$1 : 第一个字段的内容</li>
<li>$2 : 第二个字段的内容</li>
</ul>
<h2 id="将外部变量传递给-awk"><a href="#将外部变量传递给-awk" class="headerlink" title="将外部变量传递给 awk"></a>将外部变量传递给 awk</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk -v VAR=<span class="variable">$OUT_VAR</span> <span class="string">'&#123;print VAR&#125;'</span></div></pre></td></tr></table></figure>
<h2 id="设置字段界定符"><a href="#设置字段界定符" class="headerlink" title="设置字段界定符"></a>设置字段界定符</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk -F: <span class="string">'&#123;print $1&#125;'</span></div></pre></td></tr></table></figure>
<p>这样子, 就将字符界定符设置为 <code>:</code> 了.</p>
<h2 id="内建函数"><a href="#内建函数" class="headerlink" title="内建函数"></a>内建函数</h2><p><a href="ftp://ftp.gnu.org/old-gnu/Manuals/gawk-3.0.3/html_chapter/gawk_13.html" target="_blank" rel="external">gnu awk</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">length(string) : 返回字符串的长度</div></pre></td></tr></table></figure>
<h1 id="paste-命令-列拼接"><a href="#paste-命令-列拼接" class="headerlink" title="paste 命令:列拼接"></a>paste 命令:列拼接</h1><p>cat 是按行拼接的.</p>
<p>paste 则是按列来拼接的.</p>
<h1 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h1><p>逆序显示. cat 的逆单词.</p>
<h1 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h1><blockquote>
<p>命令行下载工具</p>
</blockquote>
<h2 id="指定多个下载"><a href="#指定多个下载" class="headerlink" title="指定多个下载"></a>指定多个下载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget URL1 URL2</div></pre></td></tr></table></figure>
<h2 id="指定输出文件"><a href="#指定输出文件" class="headerlink" title="指定输出文件"></a>指定输出文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget URL1 -O outputfile -o logfile</div></pre></td></tr></table></figure>
<h2 id="重试次数"><a href="#重试次数" class="headerlink" title="重试次数"></a>重试次数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -t 5 URL1</div></pre></td></tr></table></figure>
<p>为0时, 表示无限重试.</p>
<h2 id="限速"><a href="#限速" class="headerlink" title="限速"></a>限速</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --<span class="built_in">limit</span>-rate 20k URL</div></pre></td></tr></table></figure>
<h2 id="最大下载配额"><a href="#最大下载配额" class="headerlink" title="最大下载配额"></a>最大下载配额</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -Q 100m URL</div></pre></td></tr></table></figure>
<p>表示最大下载 100m 大小, 超过时就会停止.</p>
<h2 id="断点续传"><a href="#断点续传" class="headerlink" title="断点续传"></a>断点续传</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget -c URL</div></pre></td></tr></table></figure>
<h2 id="复制整个网站"><a href="#复制整个网站" class="headerlink" title="复制整个网站"></a>复制整个网站</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget --mirror --covert-links URL</div></pre></td></tr></table></figure>
<h1 id="curl-命令"><a href="#curl-命令" class="headerlink" title="curl 命令"></a>curl 命令</h1><h2 id="避免显示进度"><a href="#避免显示进度" class="headerlink" title="避免显示进度"></a>避免显示进度</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl --silent URL</div></pre></td></tr></table></figure>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl URL --silent -O</div></pre></td></tr></table></figure>
<h2 id="型进度条"><a href="#型进度条" class="headerlink" title="# 型进度条"></a><code>#</code> 型进度条</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl URL --progress</div></pre></td></tr></table></figure>
<h2 id="断点续传-1"><a href="#断点续传-1" class="headerlink" title="断点续传"></a>断点续传</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -C - URL</div></pre></td></tr></table></figure>
<p><code>-C -</code> 表示让 curl 自动计算.</p>
<h2 id="设置-referer"><a href="#设置-referer" class="headerlink" title="设置 referer"></a>设置 referer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl --referer referer_url URL</div></pre></td></tr></table></figure>
<h2 id="设置-cookie"><a href="#设置-cookie" class="headerlink" title="设置 cookie"></a>设置 cookie</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl --cookie <span class="string">"k=v;k1=v1"</span></div></pre></td></tr></table></figure>
<h2 id="将-cookie-另存为文件"><a href="#将-cookie-另存为文件" class="headerlink" title="将 cookie 另存为文件"></a>将 cookie 另存为文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl URL --cookie-jar cookie_file</div></pre></td></tr></table></figure>
<h2 id="限制带宽"><a href="#限制带宽" class="headerlink" title="限制带宽"></a>限制带宽</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl URL --<span class="built_in">limit</span>-rate 20k</div></pre></td></tr></table></figure>
<h2 id="只打印头部"><a href="#只打印头部" class="headerlink" title="只打印头部"></a>只打印头部</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -I URL</div></pre></td></tr></table></figure>
<h1 id="tar-命令"><a href="#tar-命令" class="headerlink" title="tar 命令"></a>tar 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">打包并压缩</div><div class="line">tar -cvjf file.tar.bz2 file1 fiel2</div><div class="line">tar -cvzf file.tar.gz file1 file2</div><div class="line"></div><div class="line">解压</div><div class="line">tar -xvjf file.tar.bz2</div><div class="line">tar -xvzf file.tar.gz</div></pre></td></tr></table></figure>
<h1 id="rsync-命令"><a href="#rsync-命令" class="headerlink" title="rsync 命令"></a>rsync 命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rsync -avzh source_path dest_path</div><div class="line"></div><div class="line">rsync -avzh -e <span class="string">"ssh -p 22"</span> remote_path dest_path</div></pre></td></tr></table></figure>
<h2 id="排除"><a href="#排除" class="headerlink" title="排除"></a>排除</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rsync --exclude <span class="string">"*.txt"</span></div></pre></td></tr></table></figure>
<h2 id="同步时在dest-path中删除源端不存在的文件"><a href="#同步时在dest-path中删除源端不存在的文件" class="headerlink" title="同步时在dest_path中删除源端不存在的文件"></a>同步时在dest_path中删除源端不存在的文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rsync --delete</div></pre></td></tr></table></figure>
<h1 id="fsarchiver-命令"><a href="#fsarchiver-命令" class="headerlink" title="fsarchiver 命令"></a>fsarchiver 命令</h1><blockquote>
<p>制作全盘镜像</p>
</blockquote>
<h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fsarchiver savefs backup.fsa /dev/sda1</div><div class="line"></div><div class="line">多个分区同时备份</div><div class="line">fsarchiver savefs backup.fsa /dev/sda1 /dev/sda2</div></pre></td></tr></table></figure>
<h2 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fsarchiver restfs backup.fsa id=0,dest=/dev/sda1 id=1,dest=/dev/sdb2</div></pre></td></tr></table></figure>

                                
    </div>
</article>

   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持 emacsist</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/img/wxpay.jpeg" alt="">
          </li>
        
          <li class="item">
            <img src="/img/alipay.jpeg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   



</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/books/"
              rel="noopener noreferrer"
              target="_self"
              >
              阅读
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
