<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Maven复习 | emacsist</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="java,maven," />
  

  <meta name="description" content="快速升级利用软链接方式来进行升级 软链接目录：~/maven/current 代表当前要使用的版本具体某个版本的maven: ~/maven/maven3.0具体某个版本的maven: ~/maven/maven3.1 当要切换时，将软链接指向某个具体的版本的maven即可。如： ln -s ~/maven3.0 ~/maven/current  将环境变量，只需要指向~/maven/curren">
<meta name="keywords" content="java,maven">
<meta property="og:type" content="article">
<meta property="og:title" content="Maven复习">
<meta property="og:url" content="https://emacsist.github.io/2015/10/12/Maven复习/index.html">
<meta property="og:site_name" content="emacsist">
<meta property="og:description" content="快速升级利用软链接方式来进行升级 软链接目录：~/maven/current 代表当前要使用的版本具体某个版本的maven: ~/maven/maven3.0具体某个版本的maven: ~/maven/maven3.1 当要切换时，将软链接指向某个具体的版本的maven即可。如： ln -s ~/maven3.0 ~/maven/current  将环境变量，只需要指向~/maven/curren">
<meta property="og:updated_time" content="2017-04-12T05:56:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Maven复习">
<meta name="twitter:description" content="快速升级利用软链接方式来进行升级 软链接目录：~/maven/current 代表当前要使用的版本具体某个版本的maven: ~/maven/maven3.0具体某个版本的maven: ~/maven/maven3.1 当要切换时，将软链接指向某个具体的版本的maven即可。如： ln -s ~/maven3.0 ~/maven/current  将环境变量，只需要指向~/maven/curren">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b870e52c6cd914cb42627e4a706700b7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  

  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header LEFT">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/books/"
            rel="noopener noreferrer"
            target="_self"
            >
            阅读
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#快速升级"><span class="toc-text">快速升级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置maven"><span class="toc-text">配置maven</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置代理"><span class="toc-text">设置代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#将eclipse运行在JDK上，而不是默认的JRE上"><span class="toc-text">将eclipse运行在JDK上，而不是默认的JRE上</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven使用的环境变量"><span class="toc-text">Maven使用的环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MAVEN-OPTS"><span class="toc-text">MAVEN_OPTS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#M2-HOME"><span class="toc-text">M2_HOME</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven的约定"><span class="toc-text">Maven的约定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#代码位置"><span class="toc-text">代码位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#默认scope范围"><span class="toc-text">默认scope范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译输出目录"><span class="toc-text">编译输出目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#默认的打包方式"><span class="toc-text">默认的打包方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#包输出目录为"><span class="toc-text">包输出目录为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义源码目录"><span class="toc-text">自定义源码目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#超-pom-xml"><span class="toc-text">超 pom.xml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#源码编译级别"><span class="toc-text">源码编译级别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven常用命令"><span class="toc-text">Maven常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成可执行的Jar包"><span class="toc-text">生成可执行的Jar包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven的坐标"><span class="toc-text">Maven的坐标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#groupId"><span class="toc-text">groupId</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#artifactId"><span class="toc-text">artifactId</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#version"><span class="toc-text">version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#packaging"><span class="toc-text">packaging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#classifier"><span class="toc-text">classifier</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven依赖范围"><span class="toc-text">Maven依赖范围</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#compile"><span class="toc-text">compile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#test"><span class="toc-text">test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provided"><span class="toc-text">provided</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#runtime"><span class="toc-text">runtime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#system"><span class="toc-text">system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import"><span class="toc-text">import</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#依赖传递调解"><span class="toc-text">依赖传递调解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#部署到远程仓库"><span class="toc-text">部署到远程仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#镜像"><span class="toc-text">镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven-搜索"><span class="toc-text">Maven 搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clean生命周期"><span class="toc-text">clean生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default生命周期"><span class="toc-text">default生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#site生命周期"><span class="toc-text">site生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#命令行与生命周期"><span class="toc-text">命令行与生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为源码打包"><span class="toc-text">为源码打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚合项目"><span class="toc-text">聚合项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#继承"><span class="toc-text">继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#可继承的元素"><span class="toc-text">可继承的元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dependencyManagement结合继承的作用"><span class="toc-text">dependencyManagement结合继承的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven的Jetty插件使用"><span class="toc-text">Maven的Jetty插件使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#httpConnector-参数"><span class="toc-text">httpConnector 参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#端口"><span class="toc-text">端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#监听主机"><span class="toc-text">监听主机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指定connector名"><span class="toc-text">指定connector名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#最大空闲时间"><span class="toc-text">最大空闲时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关闭socket时的延时设置"><span class="toc-text">关闭socket时的延时设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用"><span class="toc-text">使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven中的属性-property"><span class="toc-text">Maven中的属性 property</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置属性"><span class="toc-text">内置属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pom属性"><span class="toc-text">pom属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义属性"><span class="toc-text">自定义属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#settings-属性"><span class="toc-text">settings 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java系统属性"><span class="toc-text">Java系统属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#环境变量属性"><span class="toc-text">环境变量属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为不同环境使用不同配置"><span class="toc-text">为不同环境使用不同配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一般资源过滤"><span class="toc-text">一般资源过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web-资源过滤"><span class="toc-text">web 资源过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#激活-profile"><span class="toc-text">激活 profile</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令行激活"><span class="toc-text">命令行激活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#settings-xml-文件显式激活"><span class="toc-text">settings.xml 文件显式激活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#系统属性激活"><span class="toc-text">系统属性激活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#操作系统激活"><span class="toc-text">操作系统激活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件存在与否激活"><span class="toc-text">文件存在与否激活</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认激活"><span class="toc-text">默认激活</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#经典的-pom-xml-配置例子"><span class="toc-text">经典的 pom.xml 配置例子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编写Maven插件"><span class="toc-text">编写Maven插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一个简单的项目"><span class="toc-text">一个简单的项目</span></a></li></ol>
  </div>



<div class="content content-post LEFT">
   <article id="post-Maven复习" class="article article-type-post" itemprop="blogPost">
    <header class="article-header">
        <h1 class="post-title">
            Maven复习
        </h1>

        <div class="article-meta">
            <span>
        <i class="icon-calendar"></i>
        <span>2015.10.12</span>
            </span>

            
                <span class="article-author">
          <i class="icon-user"></i>
          <span>emacsist</span>
                </span>
                

                    
    <span class="article-category">
    <i class="icon-list"></i>
    
      <a class="tag-item" href="/tags/#java">
        <span class="tag-name">java</span>
    <span class="tag-size">( 116 )</span>
    </a>
    
      <a class="tag-item" href="/tags/#maven">
        <span class="tag-name">maven</span>
    <span class="tag-size">( 7 )</span>
    </a>
    

        </span>
        

                        

                                

                                        

        </div>
    </header>

    <div class="article-content">
        
                            <h2 id="快速升级"><a href="#快速升级" class="headerlink" title="快速升级"></a>快速升级</h2><p>利用软链接方式来进行升级</p>
<p>软链接目录：<code>~/maven/current</code> 代表当前要使用的版本<br>具体某个版本的maven: <code>~/maven/maven3.0</code><br>具体某个版本的maven: <code>~/maven/maven3.1</code></p>
<p>当要切换时，将软链接指向某个具体的版本的maven即可。如：</p>
<pre><code class="bash">ln -s ~/maven3.0 ~/maven/current
</code></pre>
<p>将环境变量，只需要指向<code>~/maven/current</code>即可，这样子，在切换版本时，就不用修改环境变量了.</p>
<h2 id="配置maven"><a href="#配置maven" class="headerlink" title="配置maven"></a>配置maven</h2><p>将maven安装目录下的<code>conf</code>目录，复制一份<code>settings.xml</code>到<code>~/.m2/settings.xml</code>中。然后在这里配置maven的环境。在使用IDE时，记得修改maven的配置，指向系统中的maven，而不要使用IDE自带的maven（还有IDE里maven的配置的东西 ）</p>
<h2 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h2><pre><code class="bash">
&lt;proxies&gt;
  &lt;proxy&gt;
   &lt;id&gt;my-proxy&lt;/id&gt; &lt;!-- 代理的ID --&gt;
   &lt;active&gt;true&lt;/active&gt;&lt;!-- 是否激活  --&gt;
   &lt;protocol&gt;http&lt;/protocol&gt;&lt;!-- 代理所使用的协议 --&gt;
   &lt;host&gt;ip&lt;/host&gt;&lt;!--这里填写代理服务器的IP地址--&gt;
   &lt;port&gt;port&lt;/port&gt;&lt;!-- 这里填写代理服务器的端口 --&gt;
   &lt;username&gt;usrename&lt;/username&gt;&lt;!-- 代理服务器认证的用户名 --&gt;
   &lt;password&gt;******&lt;/password&gt;&lt;!-- 代理服务器认证的用户密码 --&gt;
   &lt;nonProxyHosts&gt;localhost|127.0.0.1&lt;/nonProxyHosts&gt;&lt;!-- 不需要代理的地址，用|分隔，支持通配符* --&gt;
  &lt;/proxy&gt;
&lt;/proxies&gt;
</code></pre>
<h2 id="将eclipse运行在JDK上，而不是默认的JRE上"><a href="#将eclipse运行在JDK上，而不是默认的JRE上" class="headerlink" title="将eclipse运行在JDK上，而不是默认的JRE上"></a>将eclipse运行在JDK上，而不是默认的JRE上</h2><p><code>eclipse.ini</code> 文件</p>
<pre><code class="bash">在 -vmargs 之前添加以下内容

-vm
/path/to/jdk/bin/javaw.exe(windows下)
/path/to/jdk/bin/java(*nix下)
</code></pre>
<h2 id="Maven使用的环境变量"><a href="#Maven使用的环境变量" class="headerlink" title="Maven使用的环境变量"></a>Maven使用的环境变量</h2><h3 id="MAVEN-OPTS"><a href="#MAVEN-OPTS" class="headerlink" title="MAVEN_OPTS"></a>MAVEN_OPTS</h3><p>这个是将JVM参数，传递给maven，因为maven本质上是Java命令。比如，将这个环境变量的参数值设置为: <code>-Xms128m -Xmx512m</code></p>
<h3 id="M2-HOME"><a href="#M2-HOME" class="headerlink" title="M2_HOME"></a>M2_HOME</h3><p>这个环境变量，是指向maven的安装目录的。如<code>~/maven/current</code></p>
<h2 id="Maven的约定"><a href="#Maven的约定" class="headerlink" title="Maven的约定"></a>Maven的约定</h2><h3 id="代码位置"><a href="#代码位置" class="headerlink" title="代码位置"></a>代码位置</h3><p>主体代码放在 <code>src/main/java</code>中<br>测试代码放在 <code>src/test/java</code>中</p>
<h3 id="默认scope范围"><a href="#默认scope范围" class="headerlink" title="默认scope范围"></a>默认scope范围</h3><p>如果不指定依赖的范围，默认就是 <code>comiple</code></p>
<h3 id="编译输出目录"><a href="#编译输出目录" class="headerlink" title="编译输出目录"></a>编译输出目录</h3><p>target/classes/</p>
<h3 id="默认的打包方式"><a href="#默认的打包方式" class="headerlink" title="默认的打包方式"></a>默认的打包方式</h3><p>jar</p>
<h3 id="包输出目录为"><a href="#包输出目录为" class="headerlink" title="包输出目录为"></a>包输出目录为</h3><p>target/</p>
<h3 id="自定义源码目录"><a href="#自定义源码目录" class="headerlink" title="自定义源码目录"></a>自定义源码目录</h3><p>在<code>build</code>元素下配置:</p>
<p><code>&lt;sourceDirectory&gt;src/java&lt;/sourceDirectory&gt;</code></p>
<p>即可</p>
<h3 id="超-pom-xml"><a href="#超-pom-xml" class="headerlink" title="超 pom.xml"></a>超 pom.xml</h3><p>它在maven安装目录下的<code>M2_HOME/lib/maven-x.x.x-uber.jar</code>中的<code>org/apache/maven/project/pom-4.0.0.xml</code>目录下.(Maven2)<br><code>M2_HOME/lib/maven-model-builder-x.x.x.jar</code>中的<code>org/apache/maven/model/pom-4.0.0.xml</code></p>
<h2 id="源码编译级别"><a href="#源码编译级别" class="headerlink" title="源码编译级别"></a>源码编译级别</h2><pre><code class="bash">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.1&lt;/version&gt;
    &lt;configuration&gt;
        &lt;source&gt;1.7&lt;/source&gt;
        &lt;target&gt;1.7&lt;/target&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<h2 id="Maven常用命令"><a href="#Maven常用命令" class="headerlink" title="Maven常用命令"></a>Maven常用命令</h2><pre><code class="bash">mvn help:system

mvn clean compile
mvn clean test
mvn clean package
mvn clean install

mvn dependency:list
mvn dependency:tree
mvn dependency:analyze

查看插件的帮助
mvn help:describe -Dplugin=org.apache.maven.plugins:maven-compiler-plugin:2.1

用于多模块构建
进入parent项目的根目录，执行以下命令
构建指定模块
mvn clean install -pl 模块1的路径(相对于parent的路径,注意是路径）,模块2的路径(相对于parent的路径,注意是路径）

构建指定模块,以及这些模块所依赖的模块
mvn clean install -pl 模块1的路径(相对于parent的路径,注意是路径）,模块2的路径(相对于parent的路径,注意是路径） -am

构建依赖于指定模块以及该模块本身
mvn clean install -pl 模块的路径(相对于parent的路径,注意是路径） -amd

指定从哪个模块开始构建
mvn clean install -rf 模块1的路径(相对于parent的路径,注意是路径）

忽略测试步骤
-Dmaven.test.skip=true
</code></pre>
<h2 id="生成可执行的Jar包"><a href="#生成可执行的Jar包" class="headerlink" title="生成可执行的Jar包"></a>生成可执行的Jar包</h2><pre><code class="bash">&lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.4.1&lt;/version&gt;
        &lt;configuration&gt;
        &lt;transformers&gt;
              &lt;transformer implementation = &quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;
                  &lt;mainClass&gt;这里填写你的Main类&lt;/mainClass&gt;
              &lt;/transformer&gt;
        &lt;/transformers&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<p>使用这个插件打包完时，会生成两个jar，一个是<code>original</code>开头的，这个jar包是不可以执行的，另一个就是可执行的jar包。</p>
<h2 id="Maven的坐标"><a href="#Maven的坐标" class="headerlink" title="Maven的坐标"></a>Maven的坐标</h2><h3 id="groupId"><a href="#groupId" class="headerlink" title="groupId"></a>groupId</h3><p>所属的实际项目</p>
<h3 id="artifactId"><a href="#artifactId" class="headerlink" title="artifactId"></a>artifactId</h3><p>项目中的某个模块</p>
<h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>模块的版本</p>
<h3 id="packaging"><a href="#packaging" class="headerlink" title="packaging"></a>packaging</h3><p>模块的打包方式</p>
<h3 id="classifier"><a href="#classifier" class="headerlink" title="classifier"></a>classifier</h3><p>定义输出的一些附属构件。</p>
<p>项目构件的文件名的规则一般是：artifactId-version[-classifier].packaging</p>
<h2 id="Maven依赖范围"><a href="#Maven依赖范围" class="headerlink" title="Maven依赖范围"></a>Maven依赖范围</h2><h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><p>编译范围。也是默认的依赖范围。对编译，测试，运行三种classpath都有效。</p>
<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><p>测试依赖范围。只对测试classpath有效。在编译主代码，或者运行项目的使用时，无法使用此依赖。如: JUnit</p>
<h3 id="provided"><a href="#provided" class="headerlink" title="provided"></a>provided</h3><p>已提供依赖范围。对编译和测试classpath有效，但运行时无效。比如：servlet-api，它是tomcat等容器提供的。</p>
<h3 id="runtime"><a href="#runtime" class="headerlink" title="runtime"></a>runtime</h3><p>运行时依赖。对测试和运行有效，但编译主体代码时无效。如：JDBC驱动。</p>
<h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><p>系统范围依赖。它和 provided 一样。但使用system依赖，必须通过 <code>systemPath</code>元素，显式指定依赖文件的路径。这类依赖不是通过maven仓库，而是与本机系统绑定的，极可能是不可移植，应尽管避免使用。</p>
<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p>导入依赖范围。不会对三种（编译，测试，运行）classpath产生实际影响。</p>
<h2 id="依赖传递调解"><a href="#依赖传递调解" class="headerlink" title="依赖传递调解"></a>依赖传递调解</h2><p>原则：路径最近者优先、第一声明者优先</p>
<h2 id="部署到远程仓库"><a href="#部署到远程仓库" class="headerlink" title="部署到远程仓库"></a>部署到远程仓库</h2><pre><code class="bash">
&lt;distributionManagement&gt;
    &lt;repository&gt;
        &lt;id&gt;nexus-releases&lt;/id&gt;
        &lt;name&gt;Nexus Release Repository&lt;/name&gt;
        &lt;url&gt;http://127.0.0.1:8080/nexus/content/repositories/releases/&lt;/url&gt;
    &lt;/repository&gt;
    &lt;snapshotRepository&gt;
        &lt;id&gt;nexus-snapshots&lt;/id&gt;
        &lt;name&gt;Nexus Snapshot Repository&lt;/name&gt;
        &lt;url&gt;http://127.0.0.1:8080/nexus/content/repositories/snapshots/&lt;/url&gt;
    &lt;/snapshotRepository&gt;
&lt;/distributionManagement&gt;
</code></pre>
<p>如果远程仓库需要认证，则在<code>~/.m2/settings.xml</code>里配置</p>
<pre><code class="bash">
&lt;servers&gt;
    &lt;server&gt;
        &lt;id&gt;nexus-releases&lt;/id&gt;
        &lt;username&gt;admin&lt;/username&gt;
        &lt;password&gt;admin123&lt;/password&gt;
    &lt;/server&gt;
    &lt;server&gt;
        &lt;id&gt;nexus-snapshots&lt;/id&gt;
        &lt;username&gt;admin&lt;/username&gt;
        &lt;password&gt;admin123&lt;/password&gt;
    &lt;/server&gt;
&lt;/servers&gt;
</code></pre>
<h2 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h2><p>在<code>~/.m2/settings.xml</code>里配置</p>
<pre><code class="bash">
&lt;mirrors&gt;
    &lt;mirror&gt;
        &lt;id&gt;nexus-osc&lt;/id&gt;
        &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
        &lt;name&gt;Nexus osc&lt;/name&gt;
        &lt;url&gt;http://maven.oschina.net/content/groups/public/&lt;/url&gt;
    &lt;/mirror&gt;
&lt;/mirrors&gt;
</code></pre>
<p><mirrorof>*</mirrorof>表示镜像所有仓库。即对于远程仓库的请求，都会被该URL替代。</p>
<h2 id="Maven-搜索"><a href="#Maven-搜索" class="headerlink" title="Maven 搜索"></a>Maven 搜索</h2><p><a href="http://mvnrepository.com/" target="_blank" rel="external">mvnrepository</a></p>
<p><a href="http://maven.oschina.net/home.html" target="_blank" rel="external">OSChina</a></p>
<h2 id="clean生命周期"><a href="#clean生命周期" class="headerlink" title="clean生命周期"></a>clean生命周期</h2><ol>
<li>pre-clean</li>
<li>clean</li>
<li>post-clean</li>
</ol>
<h2 id="default生命周期"><a href="#default生命周期" class="headerlink" title="default生命周期"></a>default生命周期</h2><ol>
<li>validate</li>
<li>initialize</li>
<li>generate-sources</li>
<li>process-sources</li>
<li>generate-resources</li>
<li>process-resources</li>
<li>compile</li>
<li>process-classes</li>
<li>generate-test-sources</li>
<li>process-test-sources</li>
<li>generate-test-resources</li>
<li>process-test-resources</li>
<li>test-compile</li>
<li>process-test-classes</li>
<li>test</li>
<li>prepare-package</li>
<li>package</li>
<li>pre-integration-test</li>
<li>integration-test</li>
<li>post-integration-test</li>
<li>verify</li>
<li>install</li>
<li>deploy</li>
</ol>
<h2 id="site生命周期"><a href="#site生命周期" class="headerlink" title="site生命周期"></a>site生命周期</h2><ol>
<li>pre-site</li>
<li>site</li>
<li>post-site</li>
<li>site-deploy</li>
</ol>
<h2 id="命令行与生命周期"><a href="#命令行与生命周期" class="headerlink" title="命令行与生命周期"></a>命令行与生命周期</h2><p>mvn clean: pre-clean, clean阶段</p>
<p>mvn test: default生命周期的形状到test的所有阶段。</p>
<p>mvn clean install: pre-clean, clean以及到default生命周期的开头到install阶段</p>
<p>mvn clean deploy site-deploy: pre-clean, clean以及default生命周期的所有阶段，site生命周期的所有阶段。</p>
<h2 id="为源码打包"><a href="#为源码打包" class="headerlink" title="为源码打包"></a>为源码打包</h2><pre><code class="bash">
          &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;jar&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
</code></pre>
<h2 id="聚合项目"><a href="#聚合项目" class="headerlink" title="聚合项目"></a>聚合项目</h2><p>创建一个新的空白的maven项目.在该<code>pom.xml</code>文件上, 配置如下的内容即可:</p>
<pre><code class="bash">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;org.emacsist&lt;/groupId&gt;
  &lt;artifactId&gt;Go&lt;/artifactId&gt;
  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;

  &lt;modules&gt;
      &lt;module&gt;../mvn&lt;/module&gt;
      &lt;module&gt;../mvn2&lt;/module&gt;
  &lt;/modules&gt;
&lt;/project&gt;
</code></pre>
<p>注意, <code>&lt;module&gt;../mvn&lt;/module&gt;</code> 这是相对当前项目的其他模块的目录的路径.</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>在子模块的pom.xml里配置:</p>
<pre><code class="bash">
&lt;parent&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt; &lt;!--父pom的groupId--&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt; &lt;!--父pom的artifactId--&gt;
    &lt;version&gt;1&lt;/version&gt;
    &lt;relativePath&gt;../parent/pom.xml&lt;/relativePath&gt;&lt;!--父pom.xml的位置--&gt;
&lt;/parent&gt;
</code></pre>
<p>在集成时, 别忘记了, 将父模块,也放到聚合模块中.</p>
<h2 id="可继承的元素"><a href="#可继承的元素" class="headerlink" title="可继承的元素"></a>可继承的元素</h2><ol>
<li>groupId:项目组ID</li>
<li>version:项目版本</li>
<li>description:项目的描述信息</li>
<li>organization:项目的组织信息</li>
<li>inceptionYear:项目的创始年份</li>
<li>url:项目的URL地址</li>
<li>developers:项目的开发者信息</li>
<li>contributors:项目的贡献者信息</li>
<li>distributionManagement:项目的部署配置</li>
<li>issueManagement:项目的缺陷跟踪系统信息</li>
<li>ciManagement:项目的持续集成系统信息</li>
<li>scm:项目的版本控制系统信息</li>
<li>mailingLists:项目的邮件列表信息</li>
<li>properties:算定义的Maven属性</li>
<li>dependencies:项目的依赖配置</li>
<li>dependencyManagement:项目的依赖管理配置</li>
<li>repositoryies:项目的仓库配置</li>
<li>build:包括项目的源码目录配置，输出目录配置。插件配置，插件配置。插件管理配置等</li>
<li>reporting:包括项目的报告输出目录配置，报告插件配置竺。</li>
</ol>
<h2 id="dependencyManagement结合继承的作用"><a href="#dependencyManagement结合继承的作用" class="headerlink" title="dependencyManagement结合继承的作用"></a>dependencyManagement结合继承的作用</h2><p>dependencyManagement 结合继承, 主要是为了统一依赖的版本号.这时,在父pom.xml里使用<code>dependencyManagement</code>,而在子模块里,使用<code>dependencies</code>,但子模块里,并不指定版本号.这样子,它就会使用父的dependencyManagement中指定的依赖的版本了.</p>
<h2 id="Maven的Jetty插件使用"><a href="#Maven的Jetty插件使用" class="headerlink" title="Maven的Jetty插件使用"></a>Maven的Jetty插件使用</h2><p><a href="http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html" target="_blank" rel="external">官方文档</a></p>
<h3 id="httpConnector-参数"><a href="#httpConnector-参数" class="headerlink" title="httpConnector 参数"></a>httpConnector 参数</h3><p>前缀都是：<code>-Djetty.http.xxx=value</code></p>
<h4 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h4><p>默认为 8080 端口<br><code>port</code></p>
<p><code>mvn -Djetty.http.port=9999 jetty:run</code></p>
<h4 id="监听主机"><a href="#监听主机" class="headerlink" title="监听主机"></a>监听主机</h4><p><code>host</code></p>
<h4 id="指定connector名"><a href="#指定connector名" class="headerlink" title="指定connector名"></a>指定connector名</h4><p><code>name</code></p>
<h4 id="最大空闲时间"><a href="#最大空闲时间" class="headerlink" title="最大空闲时间"></a>最大空闲时间</h4><p><code>idleTimeout</code></p>
<h4 id="关闭socket时的延时设置"><a href="#关闭socket时的延时设置" class="headerlink" title="关闭socket时的延时设置"></a>关闭socket时的延时设置</h4><p>soLinger</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><pre><code class="bash"> &lt;plugin&gt;
                &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;9.0.6.v20130930&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- Jetty容器配置 --&gt;
                    &lt;httpConnector&gt;
                        &lt;!-- 监听的端口 --&gt;
                        &lt;port&gt;8080&lt;/port&gt;
                    &lt;/httpConnector&gt;
                    &lt;!-- 热部署，间隔多少秒重新扫描文件，默认为0,即不进行热部署 --&gt;
                    &lt;scanIntervalSeconds&gt;1&lt;/scanIntervalSeconds&gt;
                    &lt;!-- web应用配置 --&gt;
                    &lt;webApp&gt;
                        &lt;contextPath&gt;/&lt;/contextPath&gt;
                        &lt;!-- web.xml路径 --&gt;
                        &lt;descriptor&gt;${project.basedir}/WebContent/WEB-INF/web.xml&lt;/descriptor&gt;
            &lt;allowDuplicateFragmentNames&gt;true&lt;/allowDuplicateFragmentNames&gt;
                    &lt;/webApp&gt;
                    &lt;!-- 生成classes的目录 --&gt;
                    &lt;classesDirectory&gt;${project.basedir}/target/classes&lt;/classesDirectory&gt;
                    &lt;webAppSourceDirectory&gt;${project.basedir}/WebContent/&lt;/webAppSourceDirectory&gt;
                &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<h2 id="Maven中的属性-property"><a href="#Maven中的属性-property" class="headerlink" title="Maven中的属性 property"></a>Maven中的属性 property</h2><h3 id="内置属性"><a href="#内置属性" class="headerlink" title="内置属性"></a>内置属性</h3><ol>
<li><p>${basedir}，表示项目的根目录</p>
</li>
<li><p>${version}，表示项目的版本</p>
</li>
</ol>
<h3 id="pom属性"><a href="#pom属性" class="headerlink" title="pom属性"></a>pom属性</h3><ol>
<li><p>${project.build.sourceDirectory}: 表示项目的主源码目录。默认为<code>src/main/java</code></p>
</li>
<li><p>${project.build.testSourceDirectory}: 项目的测试源码目录。默认为<code>src/test/java</code></p>
</li>
<li><p>${project.build.directory}: 项目构建输出目录，默认为<code>target/</code></p>
</li>
<li><p>${project.outputDirector}: 项目主代码编译输出目录，默认为<code>target/classes/</code></p>
</li>
<li><p>${project.testOutputDirectory}: 项目测试代码编译输出目录，默认为<code>target/test-classes/</code></p>
</li>
<li><p>${project.groupId}: 项目的groupId</p>
</li>
<li><p>${project.artifactId}: 项目的artifactId</p>
</li>
<li><p>${project.version}: 项目的version，与${version}等价</p>
</li>
<li><p>${project.build.finalName}: 项目打包输出文件名，默认为${project.artifactId}-${project.version}.</p>
</li>
</ol>
<h3 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h3><pre><code class="bash">&lt;properties&gt;
    &lt;property&gt;
        &lt;my.prop&gt;hello world&lt;/my.prop&gt;
    &lt;/property&gt;
&lt;/properties&gt;
</code></pre>
<h3 id="settings-属性"><a href="#settings-属性" class="headerlink" title="settings 属性"></a>settings 属性</h3><p>这个可以引用<code>settings.xml</code>文件元素值。如：</p>
<p><code>${settings.localRepository}</code></p>
<h3 id="Java系统属性"><a href="#Java系统属性" class="headerlink" title="Java系统属性"></a>Java系统属性</h3><p>可以通过<code>mvn help:system</code>查看所有该属性值.如:</p>
<p><code>${user.home}</code></p>
<h3 id="环境变量属性"><a href="#环境变量属性" class="headerlink" title="环境变量属性"></a>环境变量属性</h3><p>都是以<code>env.</code>开头。如：<code>${env.JAVA_HOME}</code>.<br>可以通过<code>mvn help:system</code>查看。</p>
<h2 id="为不同环境使用不同配置"><a href="#为不同环境使用不同配置" class="headerlink" title="为不同环境使用不同配置"></a>为不同环境使用不同配置</h2><pre><code class="bash">    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;!-- 开发环境 --&gt;
            &lt;id&gt;dev&lt;/id&gt;
            &lt;activation&gt;
                &lt;!-- 是否是默认 --&gt;
                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
            &lt;/activation&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;!-- 测试环境 --&gt;
            &lt;id&gt;test&lt;/id&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;!-- 生产环境 --&gt;
            &lt;id&gt;production&lt;/id&gt;
            &lt;properties&gt;
                &lt;profile.active&gt;production&lt;/profile.active&gt;
                &lt;profile.scope&gt;provided&lt;/profile.scope&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
</code></pre>
<h3 id="一般资源过滤"><a href="#一般资源过滤" class="headerlink" title="一般资源过滤"></a>一般资源过滤</h3><p>还要注意，默认情况下，只有<code>pom.xml</code>时使用这些属性时，才会被解析。如果是在其他文件里，也要使用该属性时，默认情况下，是不是解析其他配置文件的占位符的变量的。</p>
<p>要开启maven解析其他资源文件来使用pom.xml里定义的属性，还需要配置如下：</p>
<pre><code class="bash">&lt;build&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;!-- 资源目录 --&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;!-- 是否解析占位符${} --&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.properties&lt;/include&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
           &lt;testResources&gt;
            &lt;resource&gt;
                &lt;!-- 资源目录 --&gt;
                &lt;directory&gt;src/test/resources&lt;/directory&gt;
                &lt;!-- 是否解析占位符${} --&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.properties&lt;/include&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
        &lt;/testResources&gt;
&lt;/build&gt;
</code></pre>
<p>然后在使用时，通过参数<code>-P</code>来激某个profile，如：</p>
<p>开发环境：<br><code>mvn clean install -Pdev</code></p>
<p>生产环境：<br><code>mvn clean install -Pproductino</code></p>
<h3 id="web-资源过滤"><a href="#web-资源过滤" class="headerlink" title="web 资源过滤"></a>web 资源过滤</h3><p>要配置 <code>maven-war-plugin</code> 插件才行</p>
<pre><code class="bash">            &lt;plugin&gt;
                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;
                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
                    &lt;webResources&gt;
                        &lt;webResource&gt;
                            &lt;directory&gt;WebContent&lt;/directory&gt;
                            &lt;!-- 解析web资源 --&gt;
                            &lt;filtering&gt;true&lt;/filtering&gt;
                            &lt;includes&gt;
                                &lt;include&gt;**/*.css&lt;/include&gt;
                                &lt;include&gt;**/*.js&lt;/include&gt;
                            &lt;/includes&gt;
                        &lt;/webResource&gt;
                    &lt;/webResources&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
</code></pre>
<h3 id="激活-profile"><a href="#激活-profile" class="headerlink" title="激活 profile"></a>激活 profile</h3><h4 id="命令行激活"><a href="#命令行激活" class="headerlink" title="命令行激活"></a>命令行激活</h4><p><code>mvn clean install -PprofileId1,profileId2</code></p>
<h4 id="settings-xml-文件显式激活"><a href="#settings-xml-文件显式激活" class="headerlink" title="settings.xml 文件显式激活"></a>settings.xml 文件显式激活</h4><pre><code class="bash">&lt;activeProfiles&gt;
    &lt;activeProfile&gt;dev&lt;/activeProfile&gt;
&lt;/activeProfiles&gt;
</code></pre>
<h4 id="系统属性激活"><a href="#系统属性激活" class="headerlink" title="系统属性激活"></a>系统属性激活</h4><pre><code class="bash">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;activation&gt;
            &lt;property&gt;
                &lt;name&gt;actProp&lt;/name&gt;
                &lt;value&gt;x&lt;/value&gt;
            &lt;/property&gt;
        &lt;/activation&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>
<p>这表示，如果存在系统属性<code>actProp</code>，并且其值为<code>x</code>，则激活该profile。如果没有value，则表示只要存在<code>actProp</code>属性，就激活。<br>系统属性，通过如下传递：</p>
<p><code>mvn clean install -DactProp=x</code></p>
<h4 id="操作系统激活"><a href="#操作系统激活" class="headerlink" title="操作系统激活"></a>操作系统激活</h4><pre><code class="bash">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;activation&gt;
            &lt;os&gt;
                &lt;name&gt;Windows XP&lt;/name&gt;
                &lt;family&gt;Windows&gt;&lt;/family&gt;
                &lt;arch&gt;x86&lt;/arch&gt;
                &lt;version&gt;5.1.2600&lt;/version&gt;
            &lt;/os&gt;
        &lt;/activation&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>
<h4 id="文件存在与否激活"><a href="#文件存在与否激活" class="headerlink" title="文件存在与否激活"></a>文件存在与否激活</h4><pre><code class="bash">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;activation&gt;
            &lt;file&gt;
                &lt;missing&gt;x.properties&lt;/missing&gt;
                &lt;exists&gt;y.properties&lt;/exists&gt;
            &lt;/file&gt;
        &lt;/activation&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>
<h4 id="默认激活"><a href="#默认激活" class="headerlink" title="默认激活"></a>默认激活</h4><pre><code class="bash">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;id&gt;dev&lt;/id&gt;
        &lt;activation&gt;
            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
        &lt;/activation&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>
<h2 id="经典的-pom-xml-配置例子"><a href="#经典的-pom-xml-配置例子" class="headerlink" title="经典的 pom.xml 配置例子"></a>经典的 pom.xml 配置例子</h2><pre><code class="bash">&lt;project
    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;
&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;!-- 所属项目名 --&gt;
    &lt;groupId&gt;jetty-demo&lt;/groupId&gt;

    &lt;!-- 模块名 --&gt;
    &lt;artifactId&gt;jetty-demo&lt;/artifactId&gt;

    &lt;!-- 版本 --&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;!-- 打包方式 --&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;

    &lt;!-- 项目的url --&gt;
    &lt;url&gt;http://emacsist.github.io&lt;/url&gt;

    &lt;!-- 开发者人员 --&gt;
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;id&gt;emacsist&lt;/id&gt;
            &lt;name&gt;Zhiyong yang&lt;/name&gt;
            &lt;email&gt;emacsist@qq.com&lt;/email&gt;
            &lt;roles&gt;
                &lt;role&gt;admin&lt;/role&gt;
            &lt;/roles&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;

    &lt;!-- SpringMVC 版本 --&gt;
    &lt;properties&gt;
        &lt;spring.version&gt;4.0.1.RELEASE&lt;/spring.version&gt;
        &lt;!— checkstyle配置文件 —&gt;
        &lt;!—     config/sun_checks.xml - Sun Microsystems Definition (default).  
            config/maven_checks.xml - Maven Development Definitions.  
            config/turbine_checks.xml - Turbine Development Definitions.  
            config/avalon_checks.xml - Avalon Development Definitions.
        —&gt;
               &lt;checkstyle.config.location&gt;config/maven_checks.xml&lt;/checkstyle.config.location&gt; 
    &lt;/properties&gt;


    &lt;!-- 这里填写项目的git地址 --&gt;
    &lt;scm&gt;
        &lt;connection&gt;scm:git:git.coding.net/emacsist/Jetty_Maven.git&lt;/connection&gt;
        &lt;developerConnection&gt;scm:git:git.coding.net/emacsist/Jetty_Maven.git&lt;/developerConnection&gt;
        &lt;url&gt;git://git.coding.net/emacsist/Jetty_Maven.git&lt;/url&gt;
    &lt;/scm&gt;

    &lt;!-- 使用 mvn site 命令生成站点报告，生成后的文件在 target/site/ 目录下 --&gt;
    &lt;reporting&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                   &lt;dependencyLocationsEnabled&gt;false&lt;/dependencyLocationsEnabled&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;!-- 报告里生成java doc --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.10.3&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;show&gt;public&lt;/show&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;!-- 报告里生成源码目录树 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-jxr-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.5&lt;/version&gt;
            &lt;/plugin&gt;


            &lt;!— mvn checkstyle:checkstyle checkstyle —&gt;
            &lt;plugin&gt;  
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;  
                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;  
                &lt;version&gt;2.9.1&lt;/version&gt;  
            &lt;/plugin&gt;  

            &lt;!-- 注意，要先执行一下 mvn package 之后再执行 mvn findbugs:gui 检查bugs —&gt;
            &lt;plugin&gt;  
                        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;  
                           &lt;artifactId&gt;findbugs-maven-plugin&lt;/artifactId&gt;  
                        &lt;version&gt;3.0.2&lt;/version&gt;  
                            &lt;configuration&gt;  
                            &lt;xmlOutput&gt;true&lt;/xmlOutput&gt;  
                               &lt;effort&gt;Max&lt;/effort&gt;  
                        &lt;/configuration&gt;  
               &lt;/plugin&gt;  

            &lt;!-- 源码分析报告PMD --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.5&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- 默认情况下，如果没有什么问题的话，它会忽略PMD的报告，这里是无论如何都显示报告 --&gt;
                    &lt;skipEmptyReport&gt;false&lt;/skipEmptyReport&gt;
                    &lt;!-- 将所有模块的分析，集成到一起 --&gt;
                    &lt;aggregate&gt;true&lt;/aggregate&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;!-- 更改记录，这个要配置上面的 scm 配置 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.3&lt;/version&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/reporting&gt;

    &lt;build&gt;
        &lt;!-- 源码目录 --&gt;
        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;
        &lt;plugins&gt;
            &lt;!--mvn source:jar 打包源码的插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.4&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;attach-sources&lt;/id&gt;
                        &lt;phase&gt;verify&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;jar-no-fork&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;

            &lt;!-- mvn site 站点插件 --&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;

            &lt;!-- mvn javadoc:javadoc 用于生成java doc --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.10.3&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;show&gt;private&lt;/show&gt;
                    &lt;nohelp&gt;true&lt;/nohelp&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;!-- mvn pmd:pmd 源码分析插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.5&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- 默认情况下，如果没有什么问题的话，它会忽略PMD的报告，这里是无论如何都显示报告 --&gt;
                    &lt;skipEmptyReport&gt;false&lt;/skipEmptyReport&gt;

                    &lt;!-- 将所有模块的分析，集成到一起 --&gt;
                    &lt;aggregate&gt;true&lt;/aggregate&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;!-- mvn jetty:run Jetty 插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;9.0.6.v20130930&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- Jetty容器配置 --&gt;
                    &lt;httpConnector&gt;
                        &lt;!-- 监听的端口 --&gt;
                        &lt;port&gt;8080&lt;/port&gt;
                    &lt;/httpConnector&gt;
                    &lt;!-- 热部署，间隔多少秒重新扫描文件，默认为0,即不进行热部署 --&gt;
                    &lt;scanIntervalSeconds&gt;1&lt;/scanIntervalSeconds&gt;

                    &lt;!-- web应用配置 --&gt;
                    &lt;webApp&gt;
                        &lt;contextPath&gt;/&lt;/contextPath&gt;
                        &lt;!-- web.xml路径 --&gt;
                        &lt;descriptor&gt;${project.basedir}/WebContent/WEB-INF/web.xml&lt;/descriptor&gt;
                    &lt;/webApp&gt;

                    &lt;!-- 生成classes的目录 --&gt;
                    &lt;classesDirectory&gt;${project.basedir}/target/classes&lt;/classesDirectory&gt;
                    &lt;webAppSourceDirectory&gt;${project.basedir}/WebContent/&lt;/webAppSourceDirectory&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;!-- mvn clean package 打包 war 的插件 --&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;
                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
                    &lt;webResources&gt;
                        &lt;webResource&gt;
                            &lt;directory&gt;WebContent&lt;/directory&gt;
                            &lt;!-- 解析web资源 --&gt;
                            &lt;filtering&gt;true&lt;/filtering&gt;
                            &lt;includes&gt;
                                &lt;include&gt;**/*.css&lt;/include&gt;
                                &lt;include&gt;**/*.js&lt;/include&gt;
                            &lt;/includes&gt;
                        &lt;/webResource&gt;
                    &lt;/webResources&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;!-- 编译器插件 --&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.3&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;3.8.1&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring dependencies start --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring dependencies end --&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>
<h2 id="编写Maven插件"><a href="#编写Maven插件" class="headerlink" title="编写Maven插件"></a>编写Maven插件</h2><ol>
<li><p>创建一个maven-plugin项目：它本身也是一个maven项目，不过，packaging 必须是<code>maven-plugin</code>.可以使用<code>maven-archetype-plugin</code>快速创建一个Maven插件项目</p>
</li>
<li><p>为插件编写目标。每个插件都必须包含一个或多个目标，Maven称为<code>Mojo</code>（与POJO对应）。编写插件时，必须提供一个或者多个继承自<code>AbstractMojo</code>类。</p>
</li>
<li><p>为目标提供配置点。</p>
</li>
<li><p>编写代码，实现目标行为</p>
</li>
<li><p>错误处理及日志。</p>
</li>
<li><p>测试插件</p>
</li>
</ol>
<h2 id="一个简单的项目"><a href="#一个简单的项目" class="headerlink" title="一个简单的项目"></a>一个简单的项目</h2><p><a href="https://coding.net/u/emacsist/p/Jetty_Maven/git" target="_blank" rel="external">Jetty-demo</a></p>

                                
    </div>
</article>

   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持 emacsist</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/img/wxpay.jpeg" alt="">
          </li>
        
          <li class="item">
            <img src="/img/alipay.jpeg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   



</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/books/"
              rel="noopener noreferrer"
              target="_self"
              >
              阅读
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
